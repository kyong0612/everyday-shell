# 休日の付き合わせ

```bash
nkf -wLux syukujitsu.csv |
    tail -n +2 |
    teip -d, -f 1 -- date -f- '+%Y-%m-%d' |
    awk -F- '$1>=2019&&$1<2022' |
    cat - <(dateutils.dseq 2019-01-01 2021-12-31 | sed 's/$/.@/') |
    sort -r |
    uniq -w 10 |
    tac
```

```txt
- `nkf -wLux`：ファイルを一般的に使われている文字コード（UTF-8）に変換します。また、改行コードをLFに統一します。

- `tail -n +2`：入力の最初の行（ヘッダ）をスキップします。

- `teip -d, -f 1 -- date -f- '+%Y-%m-%d'`：カンマで分割された各行の最初のフィールド（日付）を`date`コマンドの`-f`オプションを使ってフォーマットを変換します。

- `awk -F- '$1>=2019&&$1<2022'`：日付の年部分が2019以上2022未満（つまり2019〜2021）の行だけを抽出します。

- `cat - <(dateutils.dseq 2019-01-01 2021-12-31 | sed 's/$/.@/')`：2019年の1月1日から2021年の12月31日までのすべての日付を生成し、各行の末尾に`.@`を付加してその結果を前の出力に連結します。

- `sort -r`：全体を降順（逆順）でソートします。

- `uniq -w 10`：先頭の10文字（`YYYY-MM-DD`の日付部分）が重複する行を除去します。この結果、祝日の行は取り除かれ、祝日でない日々だけが残ります。

- `tac`：最終的な出力を逆順に並び替えます。つまり、一番新しい日付が一番上になるようにします。

なお、一部のコマンドはあらかじめインストールが必要なもの（dateutils、teip等）もあります。
```
