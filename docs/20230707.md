
# 第5週が存在する月の調査

- 日曜が5回ある2021年の月を調べる

```bash

seq 0 364 |
    sed 's/^/20210101 /' |
    sed 's/$/ days/' |
    date -f - '+%m %w' |
    grep 0$ |
    uniq -c |
    awk '$1==5{print $2}'

```

- 最初のseqと2つのsedで次のような出力を得る

```bash
root@7b0ce17d3702:/shell/qdata/63# seq 0 364 |
    sed 's/^/20210101 /' |
    sed 's/$/ days/'
# 20210101 0 days
# 20210101 1 days
# 20210101 2 days
# 20210101 3 days
# 20210101 4 days
# 20210101 5 days
# 20210101 6 days
# 20210101 7 days
# 20210101 8 days
# 20210101 9 days
# 20210101 10 days
# 20210101 11 days
# 20210101 12 days
# 20210101 13 days
# 20210101 14 days ...
```

- dateを使用して、これらの文字列が表す月と曜日に変換する
  - `%m`が月を2桁で、`%w`が曜日を数字で出力することを意味する
  - 日曜を表す数字は0
  - `-f -`は変換対象のレコード(20210101 364 daysなどの文字列）を標準入力から読み込むことを指示するオプション

```bash
root@7b0ce17d3702:/shell/qdata/63# seq 0 364 |
    sed 's/^/20210101 /' |
    sed 's/$/ days/' |
    date -f - '+%m %w'
# 01 5
# 01 6
# 01 0
# 01 1
# 01 2
# 01 3
# 01 4
# 01 5
# 01 6
# 01 0
# 01 1
# 01 2
# 01 3
# 01 4
# 01 5
# 01 6 ...
```

- 最後にgrep 0$で日曜のレコードだけ残し、uniq -cで各月のレコード数を数え、5個の月をawkで出力すると、回答になる

```bash
seq 0 364 |
    sed 's/^/20210101 /' |
    sed 's/$/ days/' |
    date -f - '+%m %w' |
    grep 0$ |
    uniq -c |
    awk '$1==5{print $2}'
```
