# 売上の集計
```bash
root@03a2e64276bb:/shell/qdata/50# cat sales
# 20180822 101212 003 01 5
# 20180822 101212 001 01 3
# 20180822 101213 002 01 10
# 20180822 101214 004 01 8
# 20180822 101215 005 01 2
# 20180822 101215 001 01 2
# 20180822 101215 002 02 7
# 20180822 101216 004 01 23
# 20180822 101216 001 03 9
root@03a2e64276bb:/shell/qdata/50# cat stones_master
# 001 01 シェル石 300
# 001 02 シェル石（お詫び用） 0
# 002 01 非行石（青） 1000
# 002 02 非行石（偽物・赤） 10
# 004 01 おじいちゃんから出た石 1
# 005 01 デーモンコア 100000
# 005 02 デーモンコア（お詫び用） 0
```

```
この一連のコマンドは、ファイル(`sales`と`stones_master`)からのデータを処理し、加工商品の値を計算し、結果を並べて表示するためのものです。

それぞれのコマンドについて詳しく説明します。

1. `awk '{a[$3$4]+=$5}END{for(k in a)print k,a[k]}' sales`

    このコマンドは`sales`ファイルを処理します。具体的には、ファイルの各行に対して第3フィールドと第4フィールドをキーとして、第5フィールドの値をそのキーの値として加算します。”END”によって、全ての行の処理が終わった時にa配列内のすべてのキーとその値を表示します。

2. `sort`

    sortコマンドは入力データをソートします。これにより、次のjoinコマンドで正しくデータを結合できます。

3. `join <(sed 's/ //' stones_master) -`

    このコマンドは、`stones_master` ファイルの情報と先ほどのawkコマンドの出力を結合します。`sed 's/ //' stones_master`は`stones_master`ファイルからの入力の各行の先頭のスペースを削除します。`join` コマンドは、共通のフィールドを見つけて2つの入力ファイルを結合します。

4. `awk '{print $2,$3*$4}'`

    このコマンドは、先の`join`コマンドの出力から第2フィールドと(第3フィールドと第4フィールドの掛け算)を表示します。

5. `column -t`

    このコマンドは、入力行を表形式に文字列形式に整形します。

この一連のコマンドはかなり複雑なので、一度にすべてを理解するのは難しいかもしれません。これらの各コマンドを個別に理解し、それから全体の流れを把握すると理解しやすくなるでしょう。
```
