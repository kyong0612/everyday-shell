# カッコのついをチェック
- カッコごとに改行を入れて整理
```bash
cat message.txt | sed 's/)(/)\n(/g'
```
```bash
root@cb512f842f2c:/shell/qdata/36# cat message.txt | sed 's/)(/)\n(/g'
# ((し)))
# ((((い))))
# (xぇ))
# ((ん))
# (((((((る))))))
# (((((し)))))
# (ゅ)
# (((げ)))))
# ((((((い)))
```
- 左右の括弧の対応が取れているかを正規表現で確認していく
```bash
cat message.txt | sed 's/)(/)\n(/g' | grep -P '^(\(\g<1>\)|[^()]+)$'
```
```bash
root@cb512f842f2c:/shell/qdata/36# cat message.txt | sed 's/)(/)\n(/g' | grep -P '^(\(\g<1>\)|[^()]+)$'
# ((((い))))
# ((ん))
# (((((し)))))
# (ゅ)
```
- `\g<数字>`は部分式呼び出し
    - \g<1>は1番外側の括弧に囲まれた`^(・・・・・)$`の`・・・・・)`の部分になる
    - `\(\g<1>\)`は\g<1>の文字列を括弧で囲んだ文字列
    - `[^()]+`は括弧を含まない1文字以上の文字列を表す
- `(\(\g<1>\)|[^()]+)`
    - 括弧に再帰的に囲まれているか、括弧を含まない1文字以上の文字列
- 括弧を外し、横になレベルと完成
```bash
i
```
```bash
root@cb512f842f2c:/shell/qdata/36# cat message.txt \
| sed 's/)(/)\n(/g' \
| grep -P '^(\(\g<1>\)|[^()]+)$' \
| tr -d '()' \
| paste - -sd ''
# いんしゅ
```
- pasteは複数のファイルの中身を横に並べて出力するコマンド
    - ファイル名ではなく-の指定でパイプの入力を処理する
    - `-s`で読み込んだ各行を横に並べ
    - `-d`で並べる時の区切り文字を空文字にできる
