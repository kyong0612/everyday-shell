# 20230803

## USメモリのアンマウント

- GUIのデスクトップ環境が動作するLinuxマシンに、フォーマット済みのUSBメモリを押すと、自動的にマウントされて、中身のファイルが閲覧できることがある
- これは自動マウント機能が有効になっているためで、たてばUbuntuでは特別な操作をしなくても、NautilusでUSBメモリ内のファイルを閲覧できる
- 一方、デスクトップ環境のないLinuxでは、基本的に、USBメモリを押しても中身のファイルに時度的にアクセスできる状態にはならない

- フォーマットされたUSBメモリをPCにいくつか挿入して、自動でマウントされなければ全部をマウントするワンライナーを考える

- USBメモリを挿入すると、/dev/sd[アルファベット1文字][数字]という名前でデバイスファイルが作成される
- [数字]の部分がパーティションを表し、単一のデバイスに複数のパーティションが存在すると、番号違いのデバイスファイルがいくつもできる
- いくつものFAT32のUSBメモリを指して全てマウントするには、まずFAT32でフォーマットされたパーティションを探す必要がある
- lsblkコマンドというデバイスの情報を表示するコマンドで、OSに認識されているデバイスの状態を確認する

```bash

root@e8a8d773dbdd:/# lsblk -o KNAME,FSTYPE,MOUNTPOINT
# KNAME FSTYPE MOUNTPOINT
# loop0
# nbd0
# nbd1
# nbd2
# nbd3
# nbd4
# nbd5
# nbd6
# nbd7
# vda
# vda1         /etc/hosts
# nbd8
# nbd9
# nbd10
# nbd11
# nbd12
# nbd13
# nbd14
# nbd15

```

- -oオプションをつけ、出力する項目を選択する
  - KNAME, FSTYPE, MOUNTPOINTは、それぞれのデバイスファイルの名前、ファイルシステム名、マウント先(マウントポイントと呼ばれる)
  - FSTYPEにvfatという表記があるが、これはFAT32などFATに属するファイルシステムで、長いファイル名を使え流ように拡張したものを指す
